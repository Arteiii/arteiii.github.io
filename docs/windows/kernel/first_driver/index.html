<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-windows/kernel/first_driver" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">First Kernel Mode Driver | Arteii</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" property="og:url" content="https://arteiii.github.io/docs/windows/kernel/first_driver/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="robots" content="index"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="First Kernel Mode Driver | Arteii"><meta data-rh="true" name="description" content="Start pasting your first kernel driver now!"><meta data-rh="true" property="og:description" content="Start pasting your first kernel driver now!"><meta data-rh="true" property="og:image" content="https://arteiii.github.io/assets/images/first_driver_preview-080caf959f5112da0ea141d08a6013b2.jpg"><meta data-rh="true" name="twitter:image" content="https://arteiii.github.io/assets/images/first_driver_preview-080caf959f5112da0ea141d08a6013b2.jpg"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://arteiii.github.io/docs/windows/kernel/first_driver/"><link data-rh="true" rel="alternate" href="https://arteiii.github.io/docs/windows/kernel/first_driver/" hreflang="en"><link data-rh="true" rel="alternate" href="https://arteiii.github.io/docs/windows/kernel/first_driver/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://D3ST694UAZ-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Arteii RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Arteii Atom Feed">
<link rel="alternate" type="application/json" href="/blog/feed.json" title="Arteii JSON Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-7JSR7YQ7YL"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-7JSR7YQ7YL",{anonymize_ip:!0})</script>


<link rel="search" type="application/opensearchdescription+xml" title="Arteii" href="/opensearch.xml">


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.a6766d06.css">
<script src="/assets/js/runtime~main.d1a5daf3.js" defer="defer"></script>
<script src="/assets/js/main.cd619bed.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):window.matchMedia("(prefers-color-scheme: light)").matches?t("light"):t("dark")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><b class="navbar__title text--truncate">Arteii</b></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link dyte-dropdown resources-dropdown">Socials</a><ul class="dropdown__menu"><li class="dyte-dropdown"><div class="resources-dropdown-menu flex flex-col rounded-2xl p-4 lg:min-w-[220px]">
  <ul class="flex list-none flex-col gap-2 pl-0 text-gray-700 dark:text-zinc-200">
    <li>
      <a href="mailto:ben.arteii@proton.me" class="flex items-center gap-2 text-inherit">
        <img src="/icons/faq.svg" alt="email/faq icon" width="22" height="22">
        Email
      </a>
    </li>
    <li>
      <a href="https://www.youtube.com/channel/UCaffwboFFfcohAehyj43pQQ" target="_blank" class="flex items-center gap-2 text-inherit">
        <img src="/icons/video.svg" alt="video icon" width="22" height="22">
        YouTube
      </a>
    </li>
    <li>
      <a href="https://github.com/arteiii" target="_blank" class="flex items-center gap-2 text-inherit">
        <img src="/icons/github.svg" alt="github icon" width="22" height="22">
        Github
      </a>
    </li>
    <li>
      <a href="https://open.spotify.com/playlist/0D0cbr8VL84AH8qJmN9kZT" target="_blank" class="flex items-center gap-2 text-inherit">
        <img src="/icons/book-open.svg" alt="open book icon" width="22" height="22">
        Good Music
      </a>
    </li>
  </ul>
</div>
</li></ul></div><a class="navbar__item navbar__link" href="/blog/">Blog</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a class="navbar__item navbar__link" href="/rust-cookbook/">Rust Cookbook</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="/"><b>Arteii</b></a><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/">Welcome</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/python/">Python</a><button aria-label="Expand sidebar category &#x27;Python&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/linux/">Linux</a><button aria-label="Expand sidebar category &#x27;Linux&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/windows/">Windows</a><button aria-label="Collapse sidebar category &#x27;Windows&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/windows/internals/">Internals</a><button aria-label="Expand sidebar category &#x27;Internals&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/windows/programming/">Programming</a><button aria-label="Expand sidebar category &#x27;Programming&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/docs/windows/kernel/">Kernel Driver</a><button aria-label="Collapse sidebar category &#x27;Kernel Driver&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/windows/kernel/first_driver/">First Kernel Mode Driver</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/windows/kernel/kernel_debugging/">Kernel Debugging</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/windows/kernel/exception_handling/">Exception Handling</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/cheatsheets/">CheatSheet</a><button aria-label="Expand sidebar category &#x27;CheatSheet&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/windows/"><span itemprop="name">Windows</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/windows/kernel/"><span itemprop="name">Kernel Driver</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">First Kernel Mode Driver</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>First Kernel Mode Driver</h1></header>
<p>If you have accurately followed the installation instructions outlined in the <a href="/docs/windows/kernel/">introduction</a>,<br>
<!-- -->you should find the &quot;Kernel Mode Driver, Empty&quot; template in Visual Studio<br>
<!-- -->Create a new project using this preset</p>
<p><img decoding="async" loading="lazy" alt="Kernel Mode Driver, Empty" src="data:image/png;base64,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" width="548" height="106" class="img_ev3q"></p>
<p>In the &quot;Driver Files&quot; section, locate the <code>.inf</code> file and delete it<br>
<!-- -->Afterward, create a new C++ source file with the name of your driver, for example, <code>test_driver.cpp</code></p>
<hr>
<p>The <code>ntddk.h</code> header file provides essential functionality and structures required for developing kernel-mode drivers.</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="color:rgb(86, 156, 214)">include</span><span class="token macro property"> </span><span class="token macro property string" style="color:rgb(206, 145, 120)">&lt;ntddk.h&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><a href="https://learn.microsoft.com/en-us/windows-hardware/drivers/ddi/ntddk/" target="_blank" rel="noopener noreferrer">Read More</a></p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="driver-entry">Driver Entry<a href="#driver-entry" class="hash-link" aria-label="Direct link to Driver Entry" title="Direct link to Driver Entry">​</a></h2>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">extern</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;C&quot;</span><span class="token plain"> NTSTATUS</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token function" style="color:rgb(220, 220, 170)">DriverEntry</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">_In_ PDRIVER_OBJECT DriverObject</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> _In_ PUNICODE_STRING RegistryPath</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">return</span><span class="token plain"> STATUS_SUCCESS</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>
<p><code>extern &quot;C&quot;</code> This is a C++ language feature. It specifies that the function should be treated as if it were declared
in the C programming
language. <a href="https://learn.microsoft.com/en-us/cpp/cpp/extern-cpp#extern-c-and-extern-c-function-declarations" target="_blank" rel="noopener noreferrer">Read More</a></p>
</li>
<li>
<p><code>NTSTATUS</code> is a data type representing the status of an operation in Windows kernel programming. It is an LONG value,
where zero typically indicates success, and non-zero values indicate various error
conditions. <a href="https://learn.microsoft.com/en-us/windows-hardware/drivers/kernel/using-ntstatus-values" target="_blank" rel="noopener noreferrer">Read More</a></p>
</li>
<li>
<p><code>DriverEntry</code> is a special function in Windows kernel-mode drivers. It serves as the entry point for the driver when
it is loaded. The operating system calls this function after loading the driver to initialize its data structures and
perform any necessary
setup. <a href="https://learn.microsoft.com/en-us/windows-hardware/drivers/wdf/driverentry-for-kmdf-drivers" target="_blank" rel="noopener noreferrer">Read More</a></p>
</li>
<li>
<p><code>_In_ PDRIVER_OBJECT</code> is a pointer to a structure that represents a driver in the Windows kernel. The <code>_In_</code>
annotation indicates that the DriverObject parameter is an input parameter, and the function will receive a pointer to
the driver
object. <a href="https://learn.microsoft.com/en-us/windows-hardware/drivers/ddi/wdm/ns-wdm-_driver_object" target="_blank" rel="noopener noreferrer">Read More</a></p>
</li>
<li>
<p><code>_In_ PUNICODE_STRING</code> is a pointer to a structure that represents a Unicode string in the Windows kernel. The <code>_In_</code>
annotation indicates that the RegistryPath parameter is an input parameter, and the function will receive a pointer to
a Unicode string representing the registry path relevant to the
driver. <a href="https://learn.microsoft.com/en-us/windows/win32/api/ntdef/ns-ntdef-_unicode_string" target="_blank" rel="noopener noreferrer">Read More</a></p>
</li>
</ul>
<p>NOTES:<br>
<code>_In_</code> is part of the Source Annotation Language (SAL) and is not needed compiler wise its still recommended to use
them. <a href="https://learn.microsoft.com/en-us/cpp/code-quality/understanding-sal" target="_blank" rel="noopener noreferrer">Read More</a></p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="driver-unload">Driver Unload<a href="#driver-unload" class="hash-link" aria-label="Direct link to Driver Unload" title="Direct link to Driver Unload">​</a></h2>
<p>To ensure proper memory management, we will define a function that automatically undoes all changes made by the driver
upon unloading. This will prevent any potential leaks from persisting beyond the driver&#x27;s use.</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">void</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token function" style="color:rgb(220, 220, 170)">TestUnload</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">_In_ PDRIVER_OBJECT DriverObject</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>the pointer to the unload function must be set using the DriverUnload member of the DriverObject</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">DriverObject</span><span class="token operator" style="color:rgb(212, 212, 212)">-&gt;</span><span class="token plain">DriverUnload </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> TestUnload</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="simple-debug-output">Simple Debug Output<a href="#simple-debug-output" class="hash-link" aria-label="Direct link to Simple Debug Output" title="Direct link to Simple Debug Output">​</a></h2>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="dbgprint">DbgPrint<a href="#dbgprint" class="hash-link" aria-label="Direct link to DbgPrint" title="Direct link to DbgPrint">​</a></h3>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token function" style="color:rgb(220, 220, 170)">DbgPrint</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;Output\n&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>DbgPrint</code> It allows you to print messages to the debugger output in both types of builds</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="kdprint">KdPrint<a href="#kdprint" class="hash-link" aria-label="Direct link to KdPrint" title="Direct link to KdPrint">​</a></h3>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token function" style="color:rgb(220, 220, 170)">KdPrint</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;Output\n&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>KdPrint</code> is often implemented as a macro, and it is typically included in debug builds but excluded in release builds</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="download-project">Download Project<a href="#download-project" class="hash-link" aria-label="Direct link to Download Project" title="Direct link to Download Project">​</a></h2>
<p>You can download the driver example project from here:</p>
<!-- -->
<div class="w-full md:max-w-sm"><div class="flex flex-col gap-4"><div class="group flex cursor-pointer items-center justify-between rounded-lg border-2 border-transparent p-3 text-text-400/60 transition-colors hover:border-primary hover:text-primary"><div class="flex flex-col"><h4 class="mb-1 text-black group-hover:text-primary dark:text-white">simpleWinDriver</h4><div class="text-sm text-text-400"></div></div><div class="flex items-center gap-2.5"><a href="https://github.com/Arteiii/simpleWinDriver" target="_blank" rel="noopener noreferrer" class="text-inherit" aria-label="Open Demo"><svg class="h-5 w-5 ___12fm75w f1w7gpdv fez10in fg4l7m0" aria-label="Open icon" fill="currentColor" role="img" width="1em" height="1em" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6 4a2 2 0 0 0-2 2v8c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2v-2.5a.5.5 0 0 1 1 0V14a3 3 0 0 1-3 3H6a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h2.5a.5.5 0 0 1 0 1H6Zm5-.5c0-.28.22-.5.5-.5h5c.28 0 .5.22.5.5v5a.5.5 0 0 1-1 0V4.7l-4.15 4.15a.5.5 0 0 1-.7-.7L15.29 4H11.5a.5.5 0 0 1-.5-.5Z" fill="currentColor"></path></svg></a><a href="https://github.com/new?template_name=simpleWinDriver&amp;template_owner=Arteiii" target="_blank" rel="noopener noreferrer" class="flex items-center gap-1 rounded-lg py-1 px-3 text-inherit transition-colors group-hover:bg-primary group-hover:text-white" aria-label="Open Repository"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-4 w-4" aria-label="GitHub icon"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg><span class="font-semibold">Template</span></a></div></div></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="start-the-driver">Start the driver<a href="#start-the-driver" class="hash-link" aria-label="Direct link to Start the driver" title="Direct link to Start the driver">​</a></h2>
<p>for debugging activate test-signing on the test pc:</p>
<div class="language-cmd codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cmd codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">bcdedit /set testsigning on</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>use:<br>
<code>sc create &lt;drivername&gt; type= kernel binpath= &quot;&lt;path to driver.sys&gt;&quot;</code></p>
<p>with <code>sc start &lt;drivername&gt;</code> u can run ur driver and <code>sc stop &lt;drivername&gt;</code>will stop it</p>
<p>and <code>sc delete &lt;drivername&gt;</code> will delete it note that you cant delete a running driver</p>
<p><a href="https://learn.microsoft.com/de-de/windows-server/administration/windows-commands/sc-create" target="_blank" rel="noopener noreferrer">Read More</a></p>
<p>To verify the functionality of your driver and capture debug output, you can
use <a href="https://learn.microsoft.com/en-us/sysinternals/downloads/debugview" target="_blank" rel="noopener noreferrer">DebugView</a> in administrator mode.<br>
<!-- -->By recording kernel events, you can monitor the messages generated by functions like DbgPrint or KdPrint.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>To enable the capture of debug output from your driver using DebugView, you need to configure the Debug Print Filter in
the Windows Registry.</p><p>Navigate to<br>
<code>HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Session Manager\Debug Print Filter</code><br>
<!-- -->(you may need to create it).</p><p>Create a <code>DWORD</code> value named <code>DEFAULT</code> and set its value to <code>8</code>.<br>
<!-- -->After making these registry changes, it&#x27;s necessary to restart the computer for the modifications to take effect.</p></div></div>
<p><img decoding="async" loading="lazy" alt="Capture kernel in dbgview" src="/assets/images/vmware_NlskJg3WCa-335d6f49f1d05550215dd358047ada53.png" width="752" height="344" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" alt="dbgview output" src="/assets/images/vmware_hEfkK08g9P-efdd6fc52dc7d2d71ab7ac5107022a9b.png" width="994" height="366" class="img_ev3q"></p>
<p>Additionally, you can confirm the successful installation of your driver by checking the Windows Registry.<br>
<!-- -->Specifically, navigate to <code>HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services</code> and look for the entry corresponding to
your driver name. A valid installation should result in the presence of the driver&#x27;s registry entry at this location</p>
<p><img decoding="async" loading="lazy" alt="regedit with test_driver key open" src="/assets/images/vmware_W3sK98lXZu-57db8b487840d9a6c39791bbaedccf20.png" width="1212" height="302" class="img_ev3q"></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/arteiii/arteiii.github.io/tree/main/docs/windows/kernel/first_driver.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/windows/kernel/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Kernel Driver</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/windows/kernel/kernel_debugging/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Kernel Debugging</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#driver-entry" class="table-of-contents__link toc-highlight">Driver Entry</a></li><li><a href="#driver-unload" class="table-of-contents__link toc-highlight">Driver Unload</a></li><li><a href="#simple-debug-output" class="table-of-contents__link toc-highlight">Simple Debug Output</a><ul><li><a href="#dbgprint" class="table-of-contents__link toc-highlight">DbgPrint</a></li><li><a href="#kdprint" class="table-of-contents__link toc-highlight">KdPrint</a></li></ul></li><li><a href="#download-project" class="table-of-contents__link toc-highlight">Download Project</a></li><li><a href="#start-the-driver" class="table-of-contents__link toc-highlight">Start the driver</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Connect</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/Arteiii" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="mailto:ben.arteii@proton.me" target="_blank" rel="noopener noreferrer" class="footer__link-item">Email<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://keybase.io/arteii" target="_blank" rel="noopener noreferrer" class="footer__link-item">keybase<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Discover</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog/">Blog</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/">Documentation</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Arteii • <a href="https://github.com/arteiii/arteiii.github.io/commits/main">Updated 9/25/2024</a></div></div></div></footer></div>
</body>
</html>